<div class="containerTransition">

    <div class="row titleH" *ngIf="afficherRecherch == 0"  >
      <div class="col-md-7">
      <h5 style= "color: white;">CONTRIBUER </h5>
      </div>
      <div class="col-md-5 searchDiv">
        <button *ngIf="afficherRecherch == 0" class="search" (click)="displaySearch()">
          TRIER PAR
        </button>
      </div>
    </div>
    <div class="row grp" *ngIf="afficherRecherch == 1">
      <div class="btn-group transitionGrp" role="group" aria-label="Basic outlined example">
        <button type="button" class="btn btn-outline-light btnGrpSearch radiusLeft" (click)="chercherActions('vétement'); displaySearch()">vétement</button>
        <button type="button" class="btn btn-outline-light btnGrpSearch" (click)="chercherActions('abonnement_transport');  displaySearch()">abonnement transport</button>
        <button type="button" class="btn btn-outline-light btnGrpSearch" (click)="chercherActions('abonnement_mobile');  displaySearch()">abonnement mobile</button>
        <button type="button" class="btn btn-outline-light btnGrpSearch" (click)="chercherActions('formation'); displaySearch()">formation</button>
        <button type="button" class="btn btn-outline-light btnGrpSearch" (click)="chercherActions('autre'); displaySearch()">autre</button>
        <button type="button" class="btn btn-outline-light btnGrpSearch radiusRight" (click)=" chargerActions(); displaySearch()">tout</button>
      </div>
    </div>
    <div class="row ">
    <div class="actions">
      <a class="card text-center bg-light ml-5 position-relative" *ngFor="let action of listActions | paginate: { itemsPerPage: 5, currentPage: page2, totalItems: totalLength2 }" (click)=" open(content) ; selectedaction(action._id);" >
        <div 
        *ngIf="action.statut == 'alert'"
        class="alertbarre bg-danger">
          ALERT
        </div>
        <div class="panel panel-default card-input my-3 "   >
            <div class="panel-body  " style="color: var(--authColor);" >
              <div class="mb-2 contImg  d-flex justify-content-center flex-wrap" >
                <img
                *ngIf="action.vetement.selected == 'true'"
                src="./../../../../../../assets/Action/fashion.svg"
                alt="registre-img"
                class="img-cards icn "
              />
              <img
                *ngIf="action.abonnement_transport.selected == 'true'"
                src="./../../../../../../assets/Action/tram.svg"
                alt="registre-img"
                class="img-cards icn "
              />
              <img
              *ngIf="action.formation.selected == 'true'"
              src="./../../../../../../assets/Action/education.svg"
              alt="registre-img"
              class="img-cards icn "
               />
               <img
               *ngIf="action.abonnement_mobile.selected == 'true'"
               src="./../../../../../../assets/Action/smartphone.svg"
               alt="registre-img"
               class="img-cards icn "
                />
                <img
                *ngIf="action.autre.selected == 'true'"
                src="./../../../../../../assets/Action/other.svg"
                alt="registre-img"
                class="img-cards icn "
                 />

              
              </div>
              
              <h6 *ngIf="action.vetement.selected == 'true'">vétement</h6>
                <h6 *ngIf="action.abonnement_mobile.selected == 'true' || action.abonnement_transport.selected == 'true' ">abonnement</h6>
                <h6 *ngIf="action.autre.selected == 'true'">autre</h6>
              <h6 style="margin-bottom: 5px;"> date: {{ action.date_action | date:'dd-MM-yyyy' }}  </h6> 
              
        
            </div>
        </div>
      </a>
        
    </div>
    <div class="row">
      <div class="col-md-12">
        <pagination-controls  class="my-pagination hide-page-numbers"(pageChange)="page2 = $event"></pagination-controls>
      </div>
    </div>
    </div>
</div>




































<!--  ---------------------modal popup ------------------------- -->

<ng-template #content let-modal>

       <!-- header de modal -->
  <div class="modal-header " style="color: var(--ColorText);" >
    <h4 class="modal-title" id="modal-basic-title">{{ selectedAction[0].benificier.username  }} <i class="fas fa-hands-helping"></i> </h4> 
    <button type="button" class="btn search" style="width: 40px;" aria-label="Close" (click)="modal.close('Save click'); displayBenifDetails()">
      <i class="fa fa-times" aria-hidden="true"></i>
    </button>
  </div>

        <!-- body de modal -->
  <div class="modal-body bg-light" style=" display:flex; justify-content: center; flex-wrap: wrap; padding-top: 0px; padding-left: 0px; padding-right: 0px; ">

        <div class="btn-group " role="group" aria-label="Basic outlined example" style="width: 100%; height: 35px; margin-top: 0px;">
         <div class="btnGrpSearchPopUP ">
               <label for="rdb" class="w-100 h-100  text-center " >
               <input name="test" type="radio" checked style="display: none;" id="rdb" class="activeBtn" (click)="displayBenifDetails()" >
              <div class="radio w-100  d-flex flex-column justify-content-center ">
               Informations de bénéficiaire
              </div>
              </label>
        </div>
          <div class="btnGrpSearchPopUP " >
            <label for="rdb2" class="w-100 h-100 text-center" >
              <input name="test" type="radio" style="display: none;" id="rdb2" class="activeBtn" (click)="displayActioonDetails()" >
              <div class="radio d-flex flex-column justify-content-center">
                Informations d'action
              </div>
            </label>
          </div>
        
        </div>


        <div style="width: 80%; margin-top: 10px; " *ngIf="afficherDetails == 'benif'">
        <table class="table table-sm" >
          <thead>
            <tr>
              <!-- <th scope="col" colspan="2">Informations de bénéficiaire</th> -->
            </tr>
          </thead>
          <tbody *ngFor="let benif of selectedAction">
            <tr>
              <td>Nom complet :</td>
              <td><label>{{ benif.benificier.last_name }}  {{ benif.benificier.first_name }}</label></td>
            </tr>
            <tr>
              <td>sexe :</td>
              <td><label>{{ benif.benificier.gender }} </label></td>
            </tr>
            <tr>
              <td>Age :</td>
              <td><label>{{ benif.benificier.age }}</label></td>
            </tr>
            <tr>
              <td>Tél :</td>
              <td><label>{{ benif.benificier.phone }}</label></td>
            </tr>
            <tr>
              <td>Email :</td>
              <td><label>{{ benif.benificier.email }}</label></td>
            </tr>
            <tr>
              <td>Adresse :</td>
              <td><label>{{ benif.benificier.adress }}</label></td>
            </tr>
          </tbody>
        </table>
        </div>

        <div style="width: 80%; margin-top: 10px;" *ngIf="afficherDetails == 'action'">
              
              <div class="vetement text" *ngIf="selectedAction[0].vetement.selected == 'true'" >
                    <label>vétement </label>
                  
                      <div class="row">
                        <div class="col-md-4 alEnd">
                        <label class="sousTitre">type :</label> 
                        </div>
                        <div class="col-md-8 alCenter">
                          <label class="sousTitre">{{ selectedAction[0].vetement.type }}</label>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-4 alEnd">
                        <label class="sousTitre">size :</label> 
                        </div>
                        <div class="col-md-8 alCenter">
                          <label class="sousTitre">{{ selectedAction[0].vetement.size }}</label>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-4 alEnd">
                        <label class="sousTitre">sexe :</label> 
                        </div>
                        <div class="col-md-8 alCenter">
                          <label class="sousTitre">{{ selectedAction[0].vetement.gender }}</label>
                        </div>
                      </div>
                <hr>
              </div>
              
              <div class="abonnement text"   *ngIf="selectedAction[0].abonnement_mobile.selected == 'true' || selectedAction[0].abonnement_transport.selected == 'true' ">
                
                  <label>Abonnement </label>
                
                    <div class="row" *ngIf="selectedAction[0].abonnement_transport.selected == 'true'">
                      <div class="col-md-4 alEnd">
                      <label class="sousTitre">transport :</label>  
                      </div>
                      <div class="col-md-8 alCenter">
                        <label class="sousTitre">type : {{selectedAction[0].abonnement_transport.type_abonnement}}</label>
                      </div>
                    </div>
                    <div class="row" *ngIf="selectedAction[0].abonnement_mobile.selected == 'true'" >
                      <div class="col-md-4 alEnd">
                      <label class="sousTitre">mobile :</label> 
                      </div>
                      <div class="col-md-8 alCenter">
                        <label class="sousTitre">{{  selectedAction[0].abonnement_mobile.operator }}</label>
                      </div>
                    </div>
              <hr>
              </div>
                
          
              <div class="autre text" *ngIf="selectedAction[0].autre.selected == 'true'">  
                <div class="row text ">
                  <div class="col-md-4">
                    <label>Autre type :</label>
                  </div>
                  <div class="col-md-8 alCenter">
                    <label>{{selectedAction[0].autre.text}}</label>
                  </div><hr>
                </div>
                
                
                </div> 

              <div class="row text" *ngFor="let action of selectedAction">
          
                <div class="col-md-4">Annoncé le :</div>
                <div class="col-md-8"><label>{{ action.date_action | date:'dd-MM-yyyy' }}</label></div>
                <hr>
              </div>

              <div class="row text" >
                <div class="col-md-4">
                    Plus :
                </div>
                <div class="col-md-8" *ngFor="let action of selectedAction" >
                    <p>{{ action.details }}</p> 
                </div>
                <hr>
              </div> 
            
        </div> 
  </div>
   

        <!-- footer de modal -->
  <div class="modal-footer " >
      <button type="button" class="btn search" style="width: 30%; margin-right: 10px;" (click)="contribuer(selectedAction[0]._id) ; modal.close('Save click') ; displayBenifDetails() " >Contribuer</button>
      <button type="button" class="btn search" style="width: 30%" (click)="modal.close('Save click'); displayBenifDetails()">Annuler</button>
  </div>

  
</ng-template>